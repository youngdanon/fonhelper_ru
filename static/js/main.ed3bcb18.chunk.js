(this["webpackJsonpmainapp-ui"]=this["webpackJsonpmainapp-ui"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(19),r=n.n(a),l=(n(28),n(29),n(30),n(2)),i=n(20),o=n(21),u=n(23),j=n(22),d=n(4),b=n.n(d),p=n(0);function O(e){var t=Object(c.useState)([]),n=Object(l.a)(t,2),s=n[0],a=n[1],r=e.eventId;return Object(c.useEffect)((function(){b()({method:"get",url:"/api/event_blocks_info/",params:{event_id:r}}).then((function(e){a(e.data)}));var e=setInterval((function(){b()({method:"get",url:"/api/event_blocks_info/",params:{event_id:r}}).then((function(e){a(e.data)}))}),2500);return function(){return clearInterval(e)}}),[]),Object(p.jsxs)("div",{className:"blockLog-table",children:[s.map((function(e){return Object(p.jsxs)("div",{className:"row log",children:[Object(p.jsx)("div",{className:"log-item score col-4 col-lg-3 text-muted",children:e.comment}),Object(p.jsx)("div",{className:"log-item score col-2 col-lg-1",children:e.score}),Object(p.jsx)("div",{className:"log-item time col-2 col-lg-1",children:e.time}),e.param?Object(p.jsxs)("div",{className:"log-item param col-2 col-lg-2",children:[" ",Object(p.jsx)("b",{children:e.factor})," (",e.param,")"]}):Object(p.jsx)("div",{className:"log-item factor col-2 col-lg-2",children:Object(p.jsx)("b",{children:e.factor})}),Object(p.jsx)("div",{className:"log-item value col-2 col-lg-1",children:e.value})]})})),s.length?"":Object(p.jsx)("span",{className:"warning",children:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043e\u043a \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0441\u043e\u0431\u044b\u0442\u0438\u044e"})]})}var v=n(9),m=function(e){var t=e.player,n=e.toggle;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{children:["Stream URL: ",t.url]}),Object(p.jsx)("button",{onClick:n,children:t.playing?"Pause":"Play"})]})},f=function(e){var t=function(e){var t=Object(c.useState)(e.map((function(e){return{url:e,audio:new Audio(e)}}))),n=Object(l.a)(t,1)[0],s=Object(c.useState)(e.map((function(e){return{url:e,playing:!1}}))),a=Object(l.a)(s,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){n.forEach((function(e,t){r[t].playing?e.audio.play():e.audio.pause()}))}),[n,r]),Object(c.useEffect)((function(){return n.forEach((function(e,t){e.audio.addEventListener("ended",(function(){var e=Object(v.a)(r);e[t].playing=!1,i(e)}))})),function(){n.forEach((function(e,t){e.audio.removeEventListener("ended",(function(){var e=Object(v.a)(r);e[t].playing=!1,i(e)}))}))}}),[]),[r,function(e){return function(){var t=Object(v.a)(r),n=r.findIndex((function(e){return!0===e.playing}));-1!==n&&n!==e?(t[n].playing=!1,t[e].playing=!0):t[e].playing=-1===n,i(t)}}]}(e.urls),n=Object(l.a)(t,2),s=n[0],a=n[1];return Object(p.jsx)("div",{children:s.map((function(e,t){return Object(p.jsx)(m,{player:e,toggle:a(t)},t)}))})},h=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).state={open:!1},c}return Object(o.a)(n,[{key:"toggleOpen",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){var e=this.state.open?"opened":"closed",t=this.props.props.event,n=this.props.props.k2value;return Object(p.jsxs)("div",{className:"line row "+(n<=t.k2?"k2-alert":""),onClick:this.toggleOpen.bind(this),children:[n<=t.k2?Object(p.jsx)(f,{urls:["https://freesound.org/people/morrisjm/sounds/268756/download/268756__morrisjm__dingaling.mp3"]}):"",Object(p.jsx)("div",{className:"col-md-12 col-lg-7 event-name level-"+t.level,children:Object(p.jsx)("h6",{children:t.name})}),Object(p.jsx)("div",{className:"col-md-12 col-lg-5 counters",children:t.counters.map((function(e){return Object(p.jsx)("div",{className:"counter",children:e?Object(p.jsx)("p",{children:Object(p.jsx)("b",{children:e})}):Object(p.jsx)("p",{className:"text-muted",children:e})})}))}),this.state.open?Object(p.jsx)("div",{className:e,children:Object(p.jsx)(O,{eventId:t.id,level:t.level})}):""]},t.id)}}]),n}(c.Component);function x(e){var t=e.liveEvents;return Object(p.jsx)("div",{className:"table-header",children:Object(p.jsxs)("div",{className:"line row",children:[Object(p.jsx)("div",{className:"col-md-12 col-lg-7 event-name",children:Object(p.jsxs)("h6",{children:["\u0421\u043e\u0431\u044b\u0442\u0438\u0439 \u043d\u0430\u0439\u0434\u0435\u043d\u043e: ",t.length]})}),Object(p.jsx)("div",{className:"col-md-12 col-lg-5 counters",children:["1","X","2","1X","X2","12","\u04241","\u04242","\u0422\u0411","\u0422\u041c","F"].map((function(e){return Object(p.jsx)("div",{className:"counter",children:e})}))})]})})}var g=s.a.createContext();function N(e){var t=Object(c.useContext)(g),n=t.unselectSport,s=t.selectSport,a=e.sport.id,r=e.sport.name,i=Object(c.useState)(!0),o=Object(l.a)(i,2),u=o[0],j=o[1];return Object(p.jsx)("span",{className:"selector "+(u?"selected":"unselected"),onClick:function(){j(!u),u?n(a):s(a)},children:r},a)}function y(){var e=Object(c.useContext)(g),t=e.countersFilterUpdate,n=e.repeatsFilterUpdate,s=Object(c.useState)(0),a=Object(l.a)(s,2),r=a[0],i=a[1],o=Object(c.useState)(1),u=Object(l.a)(o,2),j=u[0],d=u[1];return Object(p.jsxs)("div",{className:"blocks-filters row",children:[Object(p.jsxs)("div",{className:"counters-filter col-12 col-lg-5",children:[Object(p.jsx)("label",{className:"text-muted",children:" \u041c\u0438\u043d \u043a\u043e\u043b-\u0432\u043e \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043e\u043a:"}),Object(p.jsx)("input",{type:"number",value:r,onChange:function(e){return i(e.target.value)}})]}),Object(p.jsxs)("div",{className:"repeats-filter col-12 col-lg-5",children:[Object(p.jsx)("label",{className:"text-muted",children:" \u041a\u043e\u043b-\u0432\u043e \u043a\u043e\u0442\u0438\u0440. \u043f\u043e\u0434\u0440\u044f\u0434:"}),Object(p.jsx)("input",{type:"number",value:j,onChange:function(e){return d(e.target.value)}})]}),Object(p.jsx)("div",{className:"submit-button col-12 col-lg-2",children:Object(p.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:function(){return function(e,c){t(e),n(c)}(r,j)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})})]})}function k(e){var t=e.sportFilters;return Object(p.jsxs)("div",{className:"filters",children:[Object(p.jsx)("div",{className:"blockLog-filters",children:Object(p.jsx)(y,{})}),Object(p.jsx)("div",{className:"sport-filters",children:t.map((function(e){return Object(p.jsx)(N,{sport:e})}))})]})}function S(e){var t=Object(c.useState)([]),n=Object(l.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)([]),i=Object(l.a)(r,2),o=i[0],u=i[1],j=Object(c.useState)(0),d=Object(l.a)(j,2),O=d[0],v=d[1],m=Object(c.useState)(1),f=Object(l.a)(m,2),N=f[0],y=f[1];Object(c.useEffect)((function(){b()({method:"get",url:"api/sports/"}).then((function(e){u(e.data);var t=[];e.data.map((function(e){t.push(e.id)})),a(t)}))}),[]);var S=Object(c.useState)([]),C=Object(l.a)(S,2),E=C[0],_=C[1];return Object(c.useEffect)((function(){b()({method:"get",url:"/api/live_events/",params:{sports:s.join(),k1:O}}).then((function(e){_(e.data)}));var e=setInterval((function(){b()({method:"get",url:"/api/live_events/",params:{sports:s.join(),k1:O}}).then((function(e){_(e.data)}))}),2500);return function(){return clearInterval(e)}}),[s,O]),Object(p.jsxs)("div",{className:"events-table",children:[Object(p.jsx)(g.Provider,{value:{unselectSport:function(e){a(s.filter((function(t){return t!==e})))},selectSport:function(e){a(s.concat(e))},countersFilterUpdate:function(e){v(e)},repeatsFilterUpdate:function(e){y(e)}},children:Object(p.jsx)(k,{sportFilters:o})}),Object(p.jsx)(x,{liveEvents:E}),Object(p.jsx)("div",{className:"table-body",children:E.map((function(e){return Object(p.jsx)(h,{props:{event:e,k2value:N}})}))})]})}var C=function(){return Object(p.jsxs)("div",{className:"col-md-12 col-lg-11 wrapper",children:[Object(p.jsx)("h1",{children:"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f:"}),Object(p.jsx)(S,{})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(C,{})}),document.getElementById("root")),E()}},[[50,1,2]]]);
//# sourceMappingURL=main.ed3bcb18.chunk.js.map